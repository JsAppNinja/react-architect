{"version":3,"sources":["../../src/js/Transitions/Height.js"],"names":[],"mappings":"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","file":"Height.js","sourcesContent":["import { Component, PropTypes } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { animate } from '../utils/PropUtils';\n\nexport default class Height extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  static propTypes = {\n    children: PropTypes.node,\n    transitionEnterTimeout: PropTypes.number.isRequired,\n    transitionLeaveTimeout: PropTypes.number.isRequired,\n    increment: PropTypes.number.isRequired,\n  }\n\n  static defaultProps = {\n    transitionEnterTimeout: 450,\n    transitionLeaveTimeout: 450,\n    increment: 15,\n  }\n\n  init = (done, isEnter = true) => {\n    const el = ReactDOM.findDOMNode(this);\n    const fullHeight = el.offsetHeight;\n    const elStyle = window.getComputedStyle(el);\n    const paddingTop = parseInt(elStyle.paddingTop);\n\n    const { increment, transitionEnterTimeout, transitionLeaveTimeout } = this.props;\n    const transitionTime = isEnter ? transitionEnterTimeout : transitionLeaveTimeout;\n    const intervals = transitionTime / increment;\n\n    const ptTime = Math.ceil(intervals * paddingTop / fullHeight) * increment;\n    const hTime = transitionTime - ptTime;\n\n    el.style.overflow = 'hidden';\n    el.style.paddingBottom = 0;\n    if(isEnter) {\n      el.style.paddingTop = 0;\n      el.style.height = 0;\n\n      this.animatePadding(el, 0, this.linearIncrement(paddingTop, ptTime / increment), 'paddingTop', 0, ptTime, increment, () => {\n        animate(el, increment, ptTime, hTime, 'height', 0, paddingTop, fullHeight, done);\n      });\n    } else {\n      el.style.paddingTop = `${paddingTop}px`;\n      el.style.height = `${fullHeight}px`;\n      animate(el, increment, 0, hTime, 'height', fullHeight - paddingTop, fullHeight, -fullHeight, () => {\n        this.animatePadding(el, paddingTop, -this.linearIncrement(paddingTop, ptTime / increment), 'paddingTop', 0, ptTime, increment, done);\n      });\n    }\n  }\n\n  linearIncrement = (value, time) => {\n    return value / time;\n  }\n\n  animatePadding = (el, padding, paddingIncrement, name, elapsedTime, transitionTime, increment, next) => {\n    elapsedTime += increment;\n    padding += paddingIncrement;\n    el.style[name] = `${padding}px`;\n    if(elapsedTime < transitionTime) {\n      setTimeout(() => {\n        this.animatePadding(el, padding, paddingIncrement, name, elapsedTime, transitionTime, increment, next);\n      }, increment);\n    } else {\n      el.style[name] = Math.floor(padding) + 'px';\n      next();\n    }\n  }\n\n  componentWillEnter = (done) => {\n    this.init(done, true);\n  }\n\n  componentDidEnter = () => {\n    const el = ReactDOM.findDOMNode(this);\n    el.style.height = null;\n    el.style.paddingTop = null;\n    el.style.paddingBottom = null;\n    el.style.overflow = null;\n  }\n\n  componentWillLeave = (done) => {\n    this.init(done, false);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\n\n"]}