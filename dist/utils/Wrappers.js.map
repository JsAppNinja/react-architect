{"version":3,"sources":["../../src/js/utils/Wrappers.js"],"names":[],"mappings":";;;;;;;;;QAYgB,YAAY,GAAZ,YAAY;QAqCZ,YAAY,GAAZ,YAAY;QAoBZ,eAAe,GAAf,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAzDxB,SAAS,YAAY,CAAC,EAAE,EAAE,CAAC,EAAsC;MAApC,YAAY,yDAAG,KAAK;MAAE,OAAO,yDAAG,EAAE;;;AAEpE,MAAG,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;AACjB,WAAO,IAAI,CAAC;GACb;AACD,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;;AAE9D,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AAC9C,QAAM,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC/B,MAAG,CAAC,YAAY,EAAE;AAChB,UAAM,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;AAC3B,UAAM,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;GAC3B,MAAM;AACL,UAAM,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;GACpC;;AAED,IAAE,CAAC,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC;MAC/B,KAAK,GAAY,CAAC,CAAlB,KAAK;MAAE,KAAK,GAAK,CAAC,CAAX,KAAK;;;;AAGpB,YAAU,CAAC,YAAM;AACf,QAAG,CAAC,YAAY,EAAE;AAChB,YAAM,CAAC,KAAK,CAAC,IAAI,GAAM,KAAK,GAAG,EAAE,CAAC,UAAU,GAAG,MAAM,CAAC,WAAW,GAAG,CAAC,OAAI,CAAC;AAC1E,YAAM,CAAC,KAAK,CAAC,GAAG,GAAM,KAAK,GAAG,EAAE,CAAC,SAAS,GAAG,MAAM,CAAC,YAAY,GAAG,CAAC,OAAI,CAAC;KAC1E;AACD,UAAM,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;GAChC,EAAE,OAAO,CAAC,CAAC;AACZ,SAAO,MAAM,CAAC;CACf;;;;;;;;AAAA,AASM,SAAS,YAAY,CAAC,EAAE,EAAwB;MAAtB,cAAc,yDAAG,GAAG;;AACnD,MAAM,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;AAClD,MAAG,CAAC,MAAM,EAAE;AACV,WAAO;GACR;;AAED,QAAM,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC9B,YAAU,CAAC,YAAM;AACf,MAAE,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;GACxB,EAAE,cAAc,CAAC,CAAC;CACpB;;;;;;;;;AAAA,AAUM,SAAS,eAAe,GAAwC;MAAvC,YAAY,yDAAG,KAAK;MAAE,WAAW,yDAAG,CAAC;;AACnE,SAAO,UAAC,SAAS,EAAK;QACd,MAAM;gBAAN,MAAM;;AACV,eADI,MAAM,CACE,KAAK,EAAE;8BADf,MAAM;;2EAAN,MAAM,aAEF,KAAK;;cAsBb,eAAe,GAAG,UAAC,CAAC,EAAK;cACf,OAAO,GAAK,MAAK,KAAK,CAAtB,OAAO;;AACf,cAAG,WAAW,IAAI,OAAO,CAAC,MAAM,IAAI,WAAW,EAAE;AAC/C,mBAAO;WACR;;AAED,gBAAK,KAAK,CAAC,WAAW,IAAI,MAAK,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AACpD,iBAAO,CAAC,IAAI,CAAC,YAAY,CAAC,mBAAS,WAAW,OAAM,EAAE,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC;AACxE,gBAAK,QAAQ,CAAC,EAAE,aAAa,EAAE,IAAI,IAAI,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;SAChE;;cAED,aAAa,GAAG,UAAC,CAAC,EAAK;4BACkD,MAAK,KAAK;cAAzE,SAAS,eAAT,SAAS;cAAE,kBAAkB,eAAlB,kBAAkB;cAAE,kBAAkB,eAAlB,kBAAkB;cAAE,OAAO,eAAP,OAAO;4BAC/B,MAAK,KAAK;cAArC,aAAa,eAAb,aAAa;cAAE,OAAO,eAAP,OAAO;;AAE9B,mBAAS,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC;AAC1B,cAAG,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,MAAK,OAAO,KAAK,IAAI,EAAE;;AAC7D,mBAAO;WACR;;AAED,cAAM,MAAM,GAAG,mBAAS,WAAW,OAAM,CAAC,aAAa,CAAC,4BAA4B,CAAC,CAAC;AACtF,gBAAM,IAAI,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACxC,gBAAK,OAAO,GAAG,UAAU,CAAC,YAAM;AAC9B,mBAAO,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;AACtB,wBAAY,CAAC,mBAAS,WAAW,OAAM,EAAE,kBAAkB,CAAC,CAAC;AAC7D,kBAAK,OAAO,GAAG,IAAI,CAAC;AACpB,kBAAK,QAAQ,CAAC,EAAE,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;WACnF,EAAE,kBAAkB,IAAI,IAAI,IAAI,EAAE,GAAG,aAAa,CAAA,AAAC,CAAC,CAAC;SACvD;;AAhDC,cAAK,qBAAqB,GAAG,qCAAgB,qBAAqB,CAAC,IAAI,OAAM,CAAC;AAC9E,cAAK,KAAK,GAAG,EAAE,aAAa,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;AAClD,cAAK,OAAO,GAAG,IAAI,CAAC;;OACrB;;mBAPG,MAAM;;iCAsDD;AACP,iBAAO,8BAAC,SAAS,eAAK,IAAI,CAAC,KAAK,IAAE,OAAO,EAAE,IAAI,AAAC,EAAC,SAAS,EAAE,IAAI,CAAC,aAAa,AAAC,EAAC,WAAW,EAAE,IAAI,CAAC,eAAe,AAAC,EAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,AAAC,EAAC,UAAU,EAAE,IAAI,CAAC,cAAc,AAAC,IAAG,CAAC;SAC7L;;;aAxDG,MAAM;OAAS,SAAS;;AAAxB,UAAM,CASH,SAAS,GAAG;AACjB,wBAAkB,EAAE,OAjFD,SAAS,CAiFE,MAAM,CAAC,UAAU;AAC/C,wBAAkB,EAAE,OAlFD,SAAS,CAkFE,MAAM,CAAC,UAAU;AAC/C,aAAO,EAAE,OAnFU,SAAS,CAmFT,IAAI;AACvB,eAAS,EAAE,OApFQ,SAAS,CAoFP,IAAI;AACzB,iBAAW,EAAE,OArFM,SAAS,CAqFL,IAAI;KAC5B;AAfG,UAAM,CAiBH,YAAY,GAAG;AACpB,wBAAkB,EAAE,GAAG;AACvB,wBAAkB,EAAE,GAAG;KACxB;AApBG,UAAM,CAsBH,WAAW,IAAM,SAAS,CAAC,WAAW,IAAI,SAAS,CAAC,IAAI,CAAA;;AAqCjE,WAAO,MAAM,CAAC;GACf,CAAC;CACH","file":"Wrappers.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport ReactDOM from 'react-dom';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\n/**\n * Creates a ripple effect for the given element\n *\n * @param el the html element to insert a ripple into\n * @param e the click event\n * @param {bool} isPositioned? boolean if the ripple has already been positioned correctly. Defaults to false\n * @param {number} timeout? the timeout for adding the active class to the ripple. Defaults to 1ms\n */\nexport function createRipple(el, e, isPositioned = false, timeout = 15) {\n  // If right click, do nothing\n  if(e.button === 2) {\n    return null;\n  }\n  const size = Math.max(el.offsetWidth, el.offsetHeight) + 'px';\n\n  const ripple = document.createElement('span');\n  ripple.classList.add('ripple');\n  if(!isPositioned) {\n    ripple.style.height = size;\n    ripple.style.width = size;\n  } else {\n    ripple.classList.add('positioned');\n  }\n\n  el.insertBefore(ripple, el.firstChild);\n  const { pageX, pageY } = e;\n\n  // Need a short delay after inserting into the page for some reason\n  setTimeout(() => {\n    if(!isPositioned) {\n      ripple.style.left = `${pageX - el.offsetLeft - ripple.offsetWidth / 2}px`;\n      ripple.style.top = `${pageY - el.offsetTop - ripple.offsetHeight / 2}px`;\n    }\n    ripple.classList.add('active');\n  }, timeout);\n  return ripple;\n}\n\n\n/**\n * Attempts to remove the first active ripple in the current element\n *\n * @param el the html element to remove a ripple from\n * @param {number} rippleAnimTime? the animation time of the ripple. Defaults to 300\n */\nexport function removeRipple(el, rippleAnimTime = 300) {\n  const ripple = el.querySelector('.ripple.active');\n  if(!ripple) {\n    return;\n  }\n\n  ripple.classList.add('leave');\n  setTimeout(() => {\n    el.removeChild(ripple);\n  }, rippleAnimTime);\n}\n\n\n/**\n * Wraps a component with a ripple component.\n *\n * @param {bool} isPositioned? if the ripple has css positioning instead of inline styling. Defaults to false\n * @param {number} rippleLimit? number of ripples allowed. Defaults to 0 (infinite)\n * @return a React Component wrapped with functionality to create a ripple\n */\nexport function rippleComponent(isPositioned = false, rippleLimit = 0) {\n  return (Component) => {\n    class Ripple extends Component {\n      constructor(props) {\n        super(props);\n\n        this.shouldComponentUpdate = PureRenderMixin.shouldComponentUpdate.bind(this);\n        this.state = { mouseDownTime: null, ripples: [] };\n        this.timeout = null;\n      }\n\n      static propTypes = {\n        rippleEnterTimeout: PropTypes.number.isRequired,\n        rippleLeaveTimeout: PropTypes.number.isRequired,\n        onClick: PropTypes.func,\n        onMouseUp: PropTypes.func,\n        onMouseDown: PropTypes.func,\n      }\n\n      static defaultProps = {\n        rippleEnterTimeout: 300,\n        rippleLeaveTimeout: 300,\n      }\n\n      static displayName = `${Component.displayName || Component.name}Ripple`\n\n      handleMouseDown = (e) => {\n        const { ripples } = this.state;\n        if(rippleLimit && ripples.length >= rippleLimit) {\n          return;\n        }\n\n        this.props.onMouseDown && this.props.onMouseDown(e);\n        ripples.push(createRipple(ReactDOM.findDOMNode(this), e, isPositioned));\n        this.setState({ mouseDownTime: new Date(), ripples: ripples });\n      }\n\n      handleMouseUp = (e) => {\n        const { onMouseUp, rippleEnterTimeout, rippleLeaveTimeout, onClick } = this.props;\n        const { mouseDownTime, ripples } = this.state;\n\n        onMouseUp && onMouseUp(e);\n        if(e.button === 2 || !ripples.length || this.timeout !== null) { // do nothing if right click\n          return;\n        }\n\n        const ripple = ReactDOM.findDOMNode(this).querySelector('.ripple.active:not(.leave)');\n        ripple && ripple.classList.add('leave');\n        this.timeout = setTimeout(() => {\n          onClick && onClick(e);\n          removeRipple(ReactDOM.findDOMNode(this), rippleLeaveTimeout);\n          this.timeout = null;\n          this.setState({ ripples: ripples.slice(1, ripples.length), mouseDownTime: null });\n        }, rippleEnterTimeout - (new Date() - mouseDownTime));\n      }\n\n      render() {\n        return <Component {...this.props} onClick={null} onMouseUp={this.handleMouseUp} onMouseDown={this.handleMouseDown} onTouchStart={this.handleTouchStart} onTouchEnd={this.handleTouchEnd} />;\n      }\n    }\n\n    return Ripple;\n  };\n}\n\n"]}